# –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ `/admin/*` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## üîê –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª–µ `is_admin`** –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É `users` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)
2. **Middleware `IsAdmin`** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
3. –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã `/admin/*` –∑–∞—â–∏—â–µ–Ω—ã –¥–≤—É–º—è middleware:
   - `auth` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - `admin` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üöÄ –ö–∞–∫ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Artisan –∫–æ–º–∞–Ω–¥—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –ø–æ email
docker-compose exec app php artisan user:make-admin email@example.com

# –°–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
docker-compose exec app php artisan user:remove-admin email@example.com

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
docker-compose exec app php artisan user:list-admins
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Tinker

```bash
docker-compose exec app php artisan tinker

# –í Tinker –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
$user = User::where('email', 'email@example.com')->first();
$user->is_admin = true;
$user->save();
```

### –°–ø–æ—Å–æ–± 3: –ù–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
docker-compose exec db mysql -u callofduty -psecret callofduty

# –í MySQL –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
UPDATE users SET is_admin = 1 WHERE email = 'email@example.com';
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–µ–±—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

–ï—Å–ª–∏ –≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å email `your@email.com`:

```bash
docker-compose exec app php artisan user:make-admin your@email.com
```

–í—ã–≤–æ–¥:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å YourName (your@email.com) —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä!
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

```bash
docker-compose exec app php artisan user:list-admins
```

–í—ã–≤–æ–¥:
```
–°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:

+----+-----------+------------------+---------------------+
| ID | –ò–º—è       | Email            | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏    |
+----+-----------+------------------+---------------------+
| 1  | Admin     | admin@admin.com  | 07.10.2025 12:00    |
| 5  | Moderator | mod@site.com     | 07.10.2025 13:30    |
+----+-----------+------------------+---------------------+
```

## üõ°Ô∏è –ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ

–í—Å–µ –∞–¥–º–∏–Ω-–º–∞—Ä—à—Ä—É—Ç—ã —Ç–µ–ø–µ—Ä—å –∑–∞—â–∏—â–µ–Ω—ã:
- `/admin/guides` - —Å–ø–∏—Å–æ–∫ –≥–∞–π–¥–æ–≤
- `/admin/guides/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –≥–∞–π–¥–∞
- `/admin/guides/{id}/edit` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–∞–π–¥–∞
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –±—É–¥—É—â–∏–µ –∞–¥–º–∏–Ω-–º–∞—Ä—à—Ä—É—Ç—ã

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—É—á–∞—Ç –æ—à–∏–±–∫—É **403 Forbidden**
3. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –µ–≥–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
4. –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `user:remove-admin`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã/—Å–æ–∑–¥–∞–Ω—ã:

1. **–ú–∏–≥—Ä–∞—Ü–∏—è**: `database/migrations/2025_10_07_010058_add_is_admin_to_users_table.php`
2. **–ú–æ–¥–µ–ª—å User**: –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `is_admin` –∏ –º–µ—Ç–æ–¥ `isAdmin()`
3. **Middleware**: `app/Http/Middleware/IsAdmin.php`
4. **–ú–∞—Ä—à—Ä—É—Ç—ã**: –æ–±–Ω–æ–≤–ª–µ–Ω `routes/web.php`
5. **–ö–æ–º–∞–Ω–¥—ã**:
   - `app/Console/Commands/MakeUserAdmin.php`
   - `app/Console/Commands/RemoveUserAdmin.php`
   - `app/Console/Commands/ListAdmins.php`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ

```php
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
if (auth()->user()->isAdmin()) {
    // –ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
}
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞:
   ```bash
   docker-compose exec app php artisan migrate
   ```

2. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Å–µ–±—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:
   ```bash
   docker-compose exec app php artisan user:make-admin your@email.com
   ```

3. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –æ—à–∏–±–∫—É 403
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø–æ–ª—É—á–∞—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

–ì–æ—Ç–æ–≤–æ! üöÄ

